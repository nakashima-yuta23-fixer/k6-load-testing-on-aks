# Terraform Module: utils/naming

## Overview

This utility module is the **single source of truth for resource naming conventions** across the entire repository. It takes a set of standardized inputs (like resource type, role, environment) and generates consistent, compliant, and predictable names in various formats.

By centralizing the naming logic in this module, we ensure that all infrastructure provisioned through our modules adheres to the same standards, improving consistency and discoverability.

This module does not create any Azure resources itself.

---

<!-- This section is automatically generated by terraform-docs. Do not edit it directly. -->ry. -->
<!-- BEGIN_TF_DOCS -->

## Requirements
<!-- To update, run 'terraform-docs' in this directo

No requirements.

## Providers

No providers.

## Modules

No modules.

## Resources

No resources.

## Inputs

| Name                                                                     | Description                                                                                                                                                                                                                                                                             | Type     | Default | Required |
| ------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------- | :------: |
| <a name="input_customer_code"></a> [customer_code](#input_customer_code) | A short and unique code representing the customer or context of the resource. Examples: 'gaixer' for project-wide resources, 'shared' for the multi-tenant environment, 'fixer' for dogfooding, and a customer-specific code (e.g., 'custa' for Customer-A) for dedicated environments. | `string` | n/a     |   yes    |
| <a name="input_environment"></a> [environment](#input_environment)       | The official full name of the environment (e.g., development, staging, production).                                                                                                                                                                                                     | `string` | n/a     |   yes    |
| <a name="input_location"></a> [location](#input_location)                | The official full Azure location name (e.g., japaneast, eastus). Set to null for global resources.                                                                                                                                                                                      | `string` | `null`  |    no    |
| <a name="input_resource_type"></a> [resource_type](#input_resource_type) | The simple, human-readable name of the resource type (e.g., resource_group, storage_account).                                                                                                                                                                                           | `string` | n/a     |   yes    |
| <a name="input_role"></a> [role](#input_role)                            | A short name describing the function or role of the resource (e.g., central, web, api).                                                                                                                                                                                                 | `string` | n/a     |   yes    |

## Outputs

| Name                                                     | Description                                                                                                                                                  |
| -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <a name="output_compact"></a> [compact](#output_compact) | The compact name with no hyphens, for resources with strict naming constraints.                                                                              |
| <a name="output_kebab"></a> [kebab](#output_kebab)       | The standard kebab-case name for the resource (e.g., rg-gaixer-web-pr-je). For unsupported resource types, this gracefully falls back to the 'compact' name. |

<!-- END_TF_DOCS -->

---

## Usage

This module is intended to be called from within other `foundations` modules.

### Basic Example

Below is a typical example of how to invoke this module inside another module (e.g., `core_resource_group`).

```hcl
# In a foundations module's main.tf

module "naming" {
  source = "../../utils/naming"

  # 1. Specify the type of resource being named
  resource_type = "resource_group"

  # 2. Provide the standard context variables
  customer_code = var.customer_code
  role          = var.role
  environment   = var.environment
  location      = var.location
}

# Then, use the outputs to name your resource
resource "azurerm_resource_group" "this" {
  name = module.naming.kebab
  # ...
}
```

## Naming Outputs

This module provides two different name formats to accommodate various Azure resource constraints:

- **`kebab`**: The standard, human-readable kebab-case name (e.g., `rg-gaixer-apps-dv-je`). This should be used for most resources.
- **`compact`**: A compact name with no hyphens. This **must** be used for resources with stricter naming rules, such as Storage Accounts and Key Vaults (e.g., `stgaixerappsadvje`).

## Important Considerations

- **Adding New Resource Types**: If you need to support a new Azure resource type, you must first add its abbreviation to the `resource_type_map` within this module's `main.tf`.
- **Character Limits**: The `compact` output has a built-in validation (`precondition`) to check for character limits for specific resource types (e.g., 24 characters for Storage Accounts). If you encounter a `precondition failed` error during `terraform plan`, you need to shorten the input parts (`customer_code`, `role`).
